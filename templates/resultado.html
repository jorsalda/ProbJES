<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Resultados - Probabilidad Total</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    pre { white-space: pre-wrap; }
  </style>
</head>
<body class="bg-light">
  <div class="container py-5">
    <div class="card shadow-sm p-4">
      <h1 class="mb-3">Resultados del Cálculo</h1>

      <h5>Datos ingresados</h5>
      <ul>
        <li>Balotas rojas (n): <b>{{ n }}</b></li>
        <li>Balotas azules (nm): <b>{{ nm }}</b></li>
        <li>Cubos rojos (x): <b>{{ x }}</b></li>
        <li>Cubos azules (y): <b>{{ y }}</b></li>
      </ul>

      <hr>

      <!-- Tabla profesional con procesos -->
      <h5>Procesos y valores intermedios</h5>
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th>Concepto</th>
            <th>Fórmula / Expresión</th>
            <th>Valor</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Total balotas</td>
            <td>n + nm</td>
            <td>{{ procesos.total_balotas }}</td>
          </tr>
          <tr>
            <td>Total cubos</td>
            <td>x + y</td>
            <td>{{ procesos.total_cubos }}</td>
          </tr>
          <tr>
            <td>Total objetos</td>
            <td>(balotas + cubos)</td>
            <td>{{ procesos.total_objetos }}</td>
          </tr>
          <tr>
            <td>P(Balota)</td>
            <td>(balotas) / (total)</td>
            <td>{{ procesos.p_balota }}</td>
          </tr>
          <tr>
            <td>P(Cubo)</td>
            <td>(cubos) / (total)</td>
            <td>{{ procesos.p_cubo }}</td>
          </tr>
          <tr>
            <td>P(Rojo | Balota)</td>
            <td>n / (n+nm)</td>
            <td>
              {% if procesos.p_rojo_balota is not none %}
                {{ procesos.p_rojo_balota }}
              {% else %}
                No aplica (no hay balotas)
              {% endif %}
            </td>
          </tr>
          <tr>
            <td>P(Rojo | Cubo)</td>
            <td>x / (x+y)</td>
            <td>
              {% if procesos.p_rojo_cubo is not none %}
                {{ procesos.p_rojo_cubo }}
              {% else %}
                No aplica (no hay cubos)
              {% endif %}
            </td>
          </tr>
          <tr class="table-primary">
            <td>Termino balota</td>
            <td>P(Rojo|Balota) * P(Balota)</td>
            <td>{{ procesos.term_balota }}</td>
          </tr>
          <tr class="table-primary">
            <td>Termino cubo</td>
            <td>P(Rojo|Cubo) * P(Cubo)</td>
            <td>{{ procesos.term_cubo }}</td>
          </tr>
          <tr class="table-success">
            <td><b>Probabilidad total de Rojo</b></td>
            <td>{{ procesos.formula_text }}</td>
            <td><b>{{ resultado.p_total_rojo }}</b></td>
          </tr>
          <tr class="table-success">
            <td><b>P(Rojo | Cubo)</b></td>
            <td>x / (x+y)</td>
            <td><b>{{ resultado.p_condicional_rojo_dado_cubo }}</b></td>
          </tr>
        </tbody>
      </table>

      <hr>

      <!-- Explicación paso a paso -->
      <h5>Explicación paso a paso (didáctica)</h5>
      <ol>
        {% for paso in pasos %}
          <li><pre>{{ paso }}</pre></li>
        {% endfor %}
      </ol>

      <div class="mt-3">
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Volver</a>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
